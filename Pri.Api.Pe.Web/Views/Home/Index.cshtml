@{
    ViewData["Title"] = "Home Page";
}

<div v-if="loading" class="col col-lg-2 mx-auto text-center">
    <div class="spinner-border text-primary" role="status">
        <span class="sr-only"></span>
    </div>
</div>
<div v-else>
    <div v-if="loggedIn">
        <div v-if="isEmployer">
            <ul class="job-list">
                <li v-for="job in jobs" :key="job.id" class="job-card">
                    <div class="job-details">
                        <h2>{{ job.name }}</h2>
                        <p>{{ job.description }}</p>
                        <p>Salary: ${{ job.salary }}</p>
                    </div>
                    <button class="delete-button" v-on:click="deleteJob(job.id)">Delete</button>
                </li>
            </ul>
            <button v-on:click="addingNewJob = true">Add a new job</button>
            <div>
                <form v-if="addingNewJob" v-on:submit.prevent="createNewJob">
                    <div class="form-group">
                        <label>Name</label>
                        <input v-model="newJob.Name" type="text" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <input v-model="newJob.Description" type="text" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label>Salary</label>
                        <input v-model="newJob.Salary" type="number" min="10" step="0.1" class="form-control" required/>
                    </div>
                    <div class="form-group">
                        <label>Skills</label>
                        <select v-model="newJob.Skills" multiple>
                            <option v-for="skill in skills" v-bind:value="skill.name">{{ skill.name }}</option>
                        </select>
                    </div>
                    <button type="submit">Create new Job</button>
                </form>
            </div>
        </div>
        <div v-else>
            <div v-if="selectedJob === null">
                <ul class="job-list">
                    <li v-for="job in jobs" :key="job.id" class="job-card" v-on:click.prevent="selectJob(job)">
                        <div class="job-details">
                            <h2>{{ job.name }}</h2>
                            <p>{{ job.description }}</p>
                            <p>Salary: ${{ job.salary }}</p>
                        </div>
                    </li>
                </ul>
            </div>
            <div v-else>
                <h1>{{ selectedJob.name }}</h1>
            </div>
        </div>
    </div>
</div>
